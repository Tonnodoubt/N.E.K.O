<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <link rel="icon" type="image/x-icon" href="/static/favicon.ico">
    <meta charset="UTF-8">
    <title data-i18n="voice.title">音色注册 - 请使用阿里云API - Project N.E.K.O.</title>
    <!-- i18next 加载器（统一处理 CDN 加载和初始化） -->
    <script src="/static/i18n-i18next.js"></script>
    <link rel="stylesheet" href="/static/css/voice_clone.css">
</head>
<body>
    <div class="container">
        <div class="container-header">
            <h2 data-i18n="voice.title" data-text="Voice Registration">音色注册 请使用阿里云api</h2>
            <button class="close-page-btn" onclick="closeVoiceClonePage()" data-i18n-title="common.close">
                <img src="/static/icons/close_button.png" data-i18n-alt="common.close">
            </button>
        </div>
        <div class="container-content">
            <label style="display: flex; align-items: center; gap: 8px;">
                <img src="/static/icons/exclamation.png" alt="" style="width: 48px; height: 48px; flex-shrink: 0;">
                <span data-i18n="voice.selectFile">选择本地音频文件（15秒最佳，请勿超过30秒，wav/mp3格式）</span>
            </label>
            <div class="file-input-wrapper">
                <input type="file" id="audioFile" accept="audio/*">
                <label for="audioFile" class="file-input-label" id="fileInputLabel">
                    <img src="/static/icons/import_model_button_icon.png?v=1" data-i18n-alt="voice.chooseFile" class="file-icon">
                    <span class="file-text" data-i18n="voice.chooseFile" data-text="Choose File">选择文件</span>
                </label>
                <div id="fileNameDisplay" class="file-name-display"></div>
            </div>

            <div class="field-row">
                <label data-i18n="voice.refLanguage">参考音频语言（注意：不是目标音频，是您上传的参考音频的语言）</label>
                <label class="hint" data-i18n="voice.refLanguageNote">选择您上传的参考音频的语言，中文以外的语言需要指定</label>
                <select id="refLanguage" style="max-width: 600px;">
                    <option value="ch" data-i18n="voice.lang.ch">中文</option>
                    <option value="en" data-i18n="voice.lang.en">英语</option>
                    <option value="fr" data-i18n="voice.lang.fr">法语</option>
                    <option value="de" data-i18n="voice.lang.de">德语</option>
                    <option value="ja" data-i18n="voice.lang.ja">日语</option>
                    <option value="ko" data-i18n="voice.lang.ko">韩语</option>
                    <option value="ru" data-i18n="voice.lang.ru">俄语</option>
                </select>
            </div>

            <div class="field-row">
                <label data-i18n="voice.customPrefix">自定义前缀（阿里云需要）</label>
                <input type="text" id="prefix" data-i18n-placeholder="voice.prefixPlaceholder"
                    placeholder="不超过10个字符，只支持数字和英文字母" required style="max-width: 600px;">
            </div>

            <input type="hidden" id="lanlan_name" value="">

            <button class="register-voice-btn" onclick="registerVoice()">
                <img src="/static/icons/sound.png" data-i18n-alt="voice.register" class="register-icon">
                <span class="register-text" data-i18n="voice.register" data-text="Register Voice">注册音色</span>
            </button>

            <div class="result" id="result"></div>

            <!-- 已注册音色列表 -->
            <div class="voice-list-section" style="margin-top: 40px;">
                <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 16px;">
                    <label style="display: flex; align-items: center; gap: 8px; margin: 0;">
                        <img src="/static/icons/key.png" alt="" style="width: 48px; height: 48px; flex-shrink: 0;">
                        <span data-i18n="voice.registeredVoices" style="color: #40C5F1; font-weight: bold;">已注册音色</span>
                    </label>
                    <button class="btn sm" onclick="loadVoices()" id="refresh-voices-btn">
                        <span data-i18n="voice.refresh">刷新</span>
                    </button>
                </div>
                <div id="voice-list-container" style="background: white; border-radius: 8px; padding: 16px; min-height: 100px; max-height: 400px; overflow-y: auto; border: 1px solid #ccc;">
                    <div style="text-align: center; color: #999; padding: 20px;" id="voice-list-loading">
                        <span data-i18n="voice.loading">加载中...</span>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <script src="/static/js/voice_clone.js"></script>
</body>

</html>